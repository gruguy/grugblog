import{e as k,x as w,n as C,F as _,o as t,w as M,c as o,J as f,a as r,t as g,d as $,N as L,_ as A,r as v,h as S,P as B,R as F,H as p,I as y,G as c,b as h}from"./CgBFakhS.js";import{d as z}from"./B3Th_mgj.js";import{S as b}from"./PdhWmqvX.js";import{u as D}from"./kJopPaI2.js";import"./CqkleIqs.js";import"./C4XRcB4j.js";import"./D6gG8p-B.js";const H={key:0,class:"absolute top-0 right-0 bg-primary text-white text-xs font-bold px-2 py-1 rounded-bl-md"},N={key:1,class:"aspect-video overflow-hidden"},V=["src","alt"],j={class:"p-6"},I={class:"text-xl font-bold mb-2 text-foreground line-clamp-2"},Y={key:0,class:"text-muted-foreground mb-4 line-clamp-3"},P={class:"flex items-center justify-between text-sm text-muted-foreground"},R={class:"flex items-center space-x-4"},T={class:"flex items-center gap-1"},E=k({__name:"ArticleCard",props:{article:{},isFeatured:{type:Boolean}},setup(s){const e=s,n=w(()=>e.isFeatured||!1),m=i=>z(i).format("YYYY-MM-DD HH:mm:ss"),x=i=>({1:"bg-blue-100 text-blue-700",2:"bg-green-100 text-green-700",3:"bg-purple-100 text-purple-700",4:"bg-pink-100 text-pink-700",5:"bg-yellow-100 text-yellow-700",6:"bg-orange-100 text-orange-700",7:"bg-teal-100 text-teal-700",8:"bg-red-100 text-red-700"})[i]||"bg-primary/10 text-primary";return(i,d)=>{const u=C("RouterLink");return t(),_(u,{to:`/article/${s.article.id}`,class:"block bg-card rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow border border-border relative"},{default:M(()=>[n.value?(t(),o("div",H," 推荐 ")):f("",!0),s.article.cover?(t(),o("div",N,[r("img",{src:s.article.cover,alt:s.article.title,class:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"},null,8,V)])):f("",!0),r("div",j,[r("h3",I,g(s.article.title),1),s.article.summary?(t(),o("p",Y,g(s.article.summary),1)):f("",!0),r("div",P,[r("div",R,[r("span",null,g(m(s.article.createdAt)),1),r("span",T,[d[0]||(d[0]=r("svg",{class:"w-4 h-4 text-muted-foreground",fill:"currentColor",viewBox:"0 0 24 24"},[r("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})],-1)),$(" "+g(s.article.views)+" 阅读 ",1)])]),s.article.category?(t(),o("span",{key:0,class:L(["px-2 py-1 rounded",x(s.article.category.id)])},g(s.article.category.name),3)):f("",!0)])])]),_:1},8,["to"])}}}),G=Object.assign(A(E,[["__scopeId","data-v-cc679ef4"]]),{__name:"ArticleCard"}),J={class:"space-y-6"},O={class:"flex flex-wrap items-center gap-4 bg-card p-4 rounded-lg border border-border"},U=["value"],q={key:0,class:"col-span-full text-center py-12"},K={key:1,class:"col-span-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Q={key:0,class:"col-span-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},W={key:1,class:"col-span-full text-center py-4 text-muted-foreground"},ae=k({__name:"Articles",setup(s){const e=D(),n=v(""),m=v(null),x=()=>{if(!m.value||e.isLoadingMore||!e.hasMore)return;const{scrollTop:u,scrollHeight:l,clientHeight:a}=m.value;l-u-a<100&&e.loadMoreArticles()},i=async()=>{e.articles=[],e.currentCategoryId=n.value||null,e.hasMore=!0,e.currentPage=1,await d()},d=async()=>{try{await e.fetchArticles({page:1,size:12,categoryId:n.value||void 0,append:!1})}catch(u){console.error("获取文章列表失败:",u)}};return S(async()=>{await Promise.all([d(),e.fetchCategories()])}),(u,l)=>(t(),o("div",J,[l[3]||(l[3]=r("h1",{class:"text-3xl font-bold"},"文章列表",-1)),r("div",O,[B(r("select",{"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),onChange:i,class:"px-4 py-2 border border-border rounded-md bg-background text-foreground"},[l[1]||(l[1]=r("option",{value:""},"全部分类",-1)),(t(!0),o(p,null,y(c(e).categories,a=>(t(),o("option",{key:a.id,value:a.id},g(a.name),9,U))),128))],544),[[F,n.value]])]),r("div",{ref_key:"articleListContainer",ref:m,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-h-[calc(100vh-180px)] overflow-y-auto p-1",onScroll:x},[!c(e).articleLoading&&c(e).articles.length===0?(t(),o("div",q,[...l[2]||(l[2]=[r("p",{class:"text-muted-foreground"},"暂无文章",-1)])])):c(e).articleLoading&&c(e).articles.length===0?(t(),o("div",K,[(t(),o(p,null,y(6,a=>r("div",{key:`skeleton-${a}`,class:"space-y-6"},[h(b,{type:"article-card"})])),64))])):(t(),o(p,{key:2},[(t(!0),o(p,null,y(c(e).articles,a=>(t(),_(G,{key:a.id,article:a},null,8,["article"]))),128)),c(e).isLoadingMore?(t(),o("div",Q,[(t(),o(p,null,y(3,a=>r("div",{key:`load-more-skeleton-${a}`},[h(b,{type:"article-card"})])),64))])):!c(e).hasMore&&c(e).articles.length>0?(t(),o("div",W," 没有更多文章了 ")):f("",!0)],64))],544)]))}});export{ae as default};
